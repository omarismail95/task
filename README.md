# Users News Service !Users News Service is a set of APIs handle adding new users to the system with different roles and enable them to add newsto the system with maker chaker process.## System Functionality- This project is developing a layered monolith **Spring Boot** based project (with the latest  version **3.1.9**), on **Java 21**, and with an embedded database mode.- This OAuth2-based project uses a JWT token to secure endpoints and a refresh token to get a new JWT token without login.- Therefore, you need to register first to continue using the system.- The functionality is reached based on user roles, and the system has three roles.  - **Admin**: user is a predefined user (*admin@appswave.com/Admin1234*).    - Admin needs to log-in first through `/signin` API to get their token to contact the system.    - Actually, the admin can do anything in the system.  - **NORMAL**: Normal user should register before using the system through `/signup` public API.    - After successful registration, they can use the public `/signin` API to get a token to contact the system successfully.    - NORMAL user can use Authentication Apiâ€™s & Read News.  - **CONTENT_WRITER**: CONTENT_WRITER user should register before using the system through `/signup` public API.    - After successful registration, they can use the public `/signin` API to get a token to contact the system successfully.    - CONTENT_WRITER user can use Authentication Apiâ€™s & CRUD News.  - **Public**: it is not a role, but anonymous users use APIs under public (*some APIs need access and will be marked as ACCESS REQUIRED*).    - Use `/signin` API call to log-in to the system, supplying the username and password. Then you will get a valid JWT token with a longer living refresh token.    - Use `/signout` to logout from the system. (**ACCESS REQUIRED**)    - Use `/change_password` to change your current password so you will be logged-out, and you need to log-in again to access the system. (**ACCESS REQUIRED**)    - Use `/refresh_token` when your access token is expired to get new JWT access and refresh the token with the previous not expired refresh token without login into the system again. (**ACCESS REQUIRED**)    - Use `/signup` API call to register as a client to use the system functionalities related to the client; otherwise, the user will receive *Not Authorized*.## Getting started### System components StructureLet's first explain the system layers structure to understand its components:```task --> Parent folder. |- src/main/java - com.appswave.io (package)  |- UsersNewsApplication.java --> The main starting point of the application.  |- api --> Contains All REST API controllers that receive requests from the client             to process that request and, finally, return appropriate responses.              It contains all request and response DTOs.  |- repository --> All the database entities CRUD management services.   |- domain --> Domain contains all the database-modeled entities.  |- infra --> Contains all the configurations, exceptions, security management,                support utilities, and dto <--> entities mappers for the system support.   |- service --> Contains all the system business logic,                  receives calls from Controllers, calls the repository to retrieve and manage data,                  then processes them to return to the controllers. ```### Required softwareThe following are the initially required software pieces:1. **Maven**: it can be downloaded from https://maven.apache.org/download.cgi#.2. **Git**: it can be downloaded from https://git-scm.com/downloads.3. **Java 21**: it can be downloaded from https://www.oracle.com/java/technologies/downloads/#java20.Follow the installation guide for each software on provided website link and check your softwareversions from the command line to verify that they are all installed correctly.### Cloning ItNow it is the time to open **terminal** or **git bash** command line, and then clone the project under any of your favorite places with the following command:```bash> git clone https://github.com/omarismail95/task.git```### Using an IDEI recommend that you work with your Java code using an IDE that supports the development of Spring Boot applications such as **Spring Tool Suite** or **IntelliJ IDEA Community | Ultimate Edition**.All you have to do is fire up your favorite IDE **->** open or import the parent folder `task,` everything will be ready for you.### Building & Running The SystemTo build and run Users News system components, run the following command:#### Building UN Components##### UN backend```bashðŸ‘» [oismail]:task ~~ ./mvnw clean package```Now you should expect output like this:```JavaScript[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0[INFO] [INFO] [INFO] --- jar:3.3.0:jar (default-jar) @ io ---[INFO] Building jar: C:\Users\Omar Ismail\Downloads\task\target\io-0.0.1-SNAPSHOT.jar[INFO] [INFO] --- spring-boot:3.1.9:repackage (repackage) @ io ---[INFO] Replacing main artifact C:\Users\Omar Ismail\Downloads\task\target\io-0.0.1-SNAPSHOT.jar with repackaged archive, adding nested dependencies in BOOT-INF/.[INFO] The original artifact has been renamed to C:\Users\Omar Ismail\Downloads\task\target\io-0.0.1-SNAPSHOT.jar.original[INFO] ------------------------------------------------------------------------[INFO] BUILD SUCCESS[INFO] ------------------------------------------------------------------------[INFO] Total time:  25.932 s[INFO] Finished at: 2024-03-06T19:17:21+03:00[INFO] ------------------------------------------------------------------------Process finished with exit code 0```#### Running the SystemNow it's the time to run the system, and it's straightforward, just hit the following commands:##### FA backend```bashðŸ‘» [oismail]:task ~~ java --enable-preview -jar ./target/*.jar \ ```**Users News backend service** will run, with embedded H2 **database** that will be createdunder `db` folder and then the `newsDB.mv.db` file, and you should expect an output like this:```javascript2024-03-06T19:20:50.200+03:00 TRACE 17684 --- [  restartedMain] o.s.c.a.AnnotationCacheOperationSource   : Adding cacheable method 'save' with attribute: [Builder[public final java.lang.Object jdk.proxy4.$Proxy159.save(java.lang.Object)] caches=[users] | key='#p0.id' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='',false,false, Builder[public final java.lang.Object jdk.proxy4.$Proxy159.save(java.lang.Object)] caches=[users] | key='#p0.username' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='',false,false]2024-03-06T19:20:50.279+03:00 DEBUG 17684 --- [  restartedMain] o.s.b.w.s.ServletContextInitializerBeans : Mapping filters: webMvcObservationFilter urls=[/*] order=-2147483647, springSecurityFilterChain urls=[/*] order=-100, characterEncodingFilter urls=[/*] order=-2147483648, formContentFilter urls=[/*] order=-9900, requestContextFilter urls=[/*] order=-105, authJwtTokenFilter urls=[/*] order=2147483647, corsFilter urls=[/*] order=21474836472024-03-06T19:20:50.280+03:00 DEBUG 17684 --- [  restartedMain] o.s.b.w.s.ServletContextInitializerBeans : Mapping servlets: dispatcherServlet urls=[/], h2Console urls=[/db-console/*]2024-03-06T19:20:50.324+03:00 DEBUG 17684 --- [  restartedMain] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use2024-03-06T19:20:50.325+03:00 DEBUG 17684 --- [  restartedMain] o.springframework.web.filter.CorsFilter  : Filter 'corsFilter' configured for use2024-03-06T19:20:51.207+03:00 DEBUG 17684 --- [  restartedMain] s.w.s.m.m.a.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'2024-03-06T19:20:51.371+03:00 DEBUG 17684 --- [  restartedMain] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /doc/swagger-ui*/*swagger-initializer.js, /doc/swagger-ui*/**] in 'resourceHandlerMapping'2024-03-06T19:20:51.719+03:00  INFO 17684 --- [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 13 endpoint(s) beneath base path '/actuator'2024-03-06T19:20:51.848+03:00  INFO 17684 --- [  restartedMain] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5595316d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2b51e80b, org.springframework.security.web.context.SecurityContextHolderFilter@4d8e7c34, org.springframework.web.filter.CorsFilter@30574ceb, org.springframework.security.web.authentication.logout.LogoutFilter@4b161313, com.appswave.io.infra.security.AuthJwtTokenFilter@5b2edaeb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@327dd9a7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@63d6e64, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@33415a23, org.springframework.security.web.session.SessionManagementFilter@632ae4fd, org.springframework.security.web.access.ExceptionTranslationFilter@1e2bcf2c, org.springframework.security.web.access.intercept.AuthorizationFilter@463711ad]2024-03-06T19:20:52.037+03:00 DEBUG 17684 --- [  restartedMain] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice2024-03-06T19:20:52.119+03:00 DEBUG 17684 --- [  restartedMain] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice2024-03-06T19:20:52.640+03:00  INFO 17684 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 357292024-03-06T19:20:52.778+03:00  INFO 17684 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8090 (http) with context path '/api/v1'2024-03-06T19:20:52.804+03:00  INFO 17684 --- [  restartedMain] com.appswave.io.UsersNewsApplication     : Started UsersNewsApplication in 12.15 seconds (process running for 13.511)```### Access Users News System APIsYou can play and test `Users News` APIs throughout its **OpenAPI** interface.1. Go to the landing page at the following URL [http://localhost:8090/api/v1/doc/swagger-ui/index.html]   (http://localhost:8090/api/v1/doc/swagger-ui/index.html).### Access Users News System DatabaseYou can access the database through its online console from the following URL[http://localhost:8090/api/v1/db-console/](http://localhost:8090/api/v1/db-console/) with the following properties:- Driver class: `org.h2.Driver`- JDBC URL: `jdbc:h2:./target/db/newsDB`- user: `sa`- password: `Admin1234`Hit test, and it should show a green bar for successful settings. So hit the **Connect** button and explore all data.### Stopping The SystemJust press the `CTRL+C` keys on the terminal.## The EndHappy Coding ðŸ˜Š